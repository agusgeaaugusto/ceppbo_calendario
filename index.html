<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Calendario Académico — C.E.P.P.B.O.</title>
  <meta name="description" content="Calendario Académico en tiempo real — C.E.P.P.B.O.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="icons/favicon.png">
  <link rel="apple-touch-icon" href="icons/favicon.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="assets/logo.png" alt="CEPPBO" class="brand__logo" />
      <div class="brand__text">
        <h1>Calendario Académico</h1>
        <small>C.E.P.P.B.O. — Compartido en tiempo real</small>
      </div>
    </div>
    <div class="topbar__actions">
      <button id="editToggle" class="btn btn-primary">Editar</button>
      <button id="wipeAll" class="btn btn-danger">Borrar todo</button>
    </div>
  </header>

  <main class="layout">
    <section class="calendar-panel">
      <!-- Aquí iría tu calendario existente; dejamos un placeholder -->
      <div class="calendar-placeholder">
        <div class="cal-head">
          <button class="chip" id="prevMonth">◀</button>
          <div class="cal-title" id="calTitle">Septiembre 2025</div>
          <button class="chip" id="nextMonth">▶</button>
          <button class="chip" id="goToday">Hoy</button>
        </div>
        <div class="cal-grid" id="calGrid">
          <!-- Placeholder estático simple -->
          <!-- Integra aquí tu lógica de calendario real si ya la tienes -->
          <div class="cal-cell">1</div><div class="cal-cell">2</div><div class="cal-cell">3</div>
          <div class="cal-cell">4</div><div class="cal-cell">5</div><div class="cal-cell">6</div>
          <div class="cal-cell">7</div><div class="cal-cell">8</div><div class="cal-cell">9</div>
          <div class="cal-cell">10</div><div class="cal-cell">11</div><div class="cal-cell">12</div>
          <div class="cal-cell">13</div><div class="cal-cell">14</div><div class="cal-cell">15</div>
          <div class="cal-cell">16</div><div class="cal-cell">17</div><div class="cal-cell">18</div>
          <div class="cal-cell">19</div><div class="cal-cell">20</div><div class="cal-cell">21</div>
          <div class="cal-cell">22</div><div class="cal-cell">23</div><div class="cal-cell">24</div>
          <div class="cal-cell">25</div><div class="cal-cell">26</div><div class="cal-cell">27</div>
          <div class="cal-cell">28</div><div class="cal-cell">29</div><div class="cal-cell">30</div>
        </div>
      </div>
    </section>

    <section class="events-panel">
      <h2>Fechas conmemorativas</h2>
      <div class="filters" id="filters">
        <button class="filter-btn" data-filter="all" aria-pressed="true">Todos</button>
        <button class="filter-btn" data-filter="comm" aria-pressed="false">Conmemorativa</button>
        <button class="filter-btn" data-filter="act" aria-pressed="false">Acto/Evento</button>
        <button class="filter-btn" data-filter="feriado" aria-pressed="false">Feriado</button>
        <button class="filter-btn" data-filter="otro" aria-pressed="false">Otro</button>
      </div>

      <div id="eventList" class="event-list" aria-live="polite"></div>
    </section>
  </main>

  <!-- Modal Editor -->
  <dialog id="editorModal" class="modal">
    <form id="eventForm" method="dialog">
      <header class="modal__head">
        <h3 id="editorTitle">Nueva fecha</h3>
        <button type="button" class="iconbtn" id="closeEditor" aria-label="Cerrar">✕</button>
      </header>
      <div class="modal__body">
        <div class="form-grid">
          <label> Título
            <input name="title" id="title" required maxlength="120" />
          </label>

          <label> Fecha
            <input type="date" name="date" id="date" required />
          </label>

          <label> Tipo
            <select name="type" id="type" required>
              <option value="comm">Conmemorativa</option>
              <option value="act">Acto/Evento</option>
              <option value="feriado">Feriado</option>
              <option value="otro">Otro</option>
            </select>
          </label>

          <label> Descripción
            <textarea name="desc" id="desc" rows="3" placeholder="Opcional"></textarea>
          </label>

          <label> Imagen (banner)
            <input type="file" id="photo" accept="image/*" />
            <small>Se redimensiona a 800×800 máx. y se guarda en Firebase Storage.</small>
          </label>
        </div>
      </div>
      <footer class="modal__foot">
        <button type="button" class="btn" id="cancelEdit">Cancelar</button>
        <button type="submit" class="btn btn-primary" id="saveEvent">Guardar</button>
      </footer>
    </form>
  </dialog>

  <!-- PIN de edición -->
  <dialog id="pinModal" class="modal">
    <form id="pinForm" method="dialog">
      <header class="modal__head">
        <h3>PIN de edición</h3>
      </header>
      <div class="modal__body">
        <p>Ingresa el PIN para desbloquear edición.</p>
        <input id="pinInput" placeholder="•••" maxlength="6">
      </div>
      <footer class="modal__foot">
        <button type="button" class="btn" id="cancelPin">Cancelar</button>
        <button type="submit" class="btn btn-primary">Acceder</button>
      </footer>
    </form>
  </dialog>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-storage-compat.js"></script>

  <script src="firebase-config.js"></script>
  <script src="app.js"></script>
</body>
</html>
